
create table solved_challenges (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users(id) not null,
  challenge_id text not null,
  solved_at timestamptz default now(),
  constraint unique_user_challenge unique (user_id, challenge_id)
);

alter table solved_challenges enable row level security;

create policy "Users can view their own solved challenges"
on solved_challenges for select
using ( auth.uid() = user_id );

create policy "Users can insert their own solved challenges"
on solved_challenges for insert
with check ( auth.uid() = user_id );

